{"mappings":"A,M,sC,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,I,E,E,SCCA,IAAM,EAAO,IAAI,EAAA,MAAA,CAAU,CACvB,MAAO,IACP,OAAQ,GACZ,EAGA,OAAM,UAAwB,EAA9B,SAAA,CAEI,YAAmB,CAAiB,CAAE,CAClC,KAAK,GAAA,IAAA,CADU,MAAA,CAAA,EAAA,IAAA,CADH,IAAA,CAAO,QAGvB,CACJ,CAEA,MAAM,UAAqB,EAA3B,MAAA,CAaW,OAAO,CAAqB,CAAE,CAAa,CAAE,CAChD,IAAK,IAAI,KAAU,EAAU,CACzB,IAAM,EAAS,EAAO,GAAG,CAAC,GAAkB,MAAM,CAE5C,EAAY,EAAO,GAAG,CAAC,EAA7B,kBAAA,EAGM,EAAS,AADG,EAAO,GAAG,CAAC,EAAU,GAAG,EACjB,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAG5D,CAAA,EAAU,GAAG,CAAG,EAAU,GAAG,CAAC,GAAG,CAAC,EAAO,KAAK,CAAC,EAAQ,KAC3D,CACJ,C,Y,G,C,C,CAzBJ,KAAA,IAAA,GAEoB,IAAA,CAAA,KAAA,CAAQ,CAAC,eAAgB,SAAS,CAI3C,IAAA,CAAA,QAAA,CAAW,GAGX,IAAA,CAAA,UAAA,CAAa,EAAA,UAAA,CAAc,MAAM,CAAA,IAAA,CAEhC,YAAA,CAAe,G,CAe3B,CAEA,IAAM,EAAQ,IAAI,EAAlB,KAAA,CACA,EAAM,KAAK,CAAC,GAAG,CAAC,IAAI,GAGpB,IAAM,EAAQ,IAAI,EAAA,KAAA,CAAS,CACvB,IAAK,EAAA,GAAA,CAAO,IAAK,KACjB,MAAO,GACP,OAAQ,GACR,MAAO,EAAA,KAAA,CAAS,GAAG,AACvB,GACA,EAAM,YAAY,CAAC,IAAI,EAAgB,EAAA,GAAA,CAAO,IAAK,OAGnD,EAAK,QAAQ,CAAC,OAAQ,GACtB,EAAK,KAAK,GAAG,IAAI,CAAC,KACd,EAAK,YAAY,CAAC,GAAG,CAAC,EAC1B","sources":["<anon>","src/ecs/main.ts"],"sourcesContent":["import \"./actor.cb50ae3a.js\";\n\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequirec1c4\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequirec1c4\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $6TXE3 = parcelRequire(\"6TXE3\");\nconst $91149570b92921bc$var$game = new $6TXE3.Engine({\n    width: 600,\n    height: 400\n});\n// start-snippet{ecs}\nclass $91149570b92921bc$var$SearchComponent extends $6TXE3.Component {\n    constructor(target){\n        super(), this.target = target, this.type = 'search';\n    }\n}\nclass $91149570b92921bc$var$SearchSystem extends $6TXE3.System {\n    update(entities, delta) {\n        for (let entity of entities){\n            const target = entity.get($91149570b92921bc$var$SearchComponent).target;\n            // ex.TransformComponent is a built in type\n            const transform = entity.get($6TXE3.TransformComponent);\n            const direction = target.sub(transform.pos);\n            const motion = direction.normalize().scale(this._searchSpeed);\n            // Moves these entities towards the target at 10 pixels per second\n            transform.pos = transform.pos.add(motion.scale(delta / 1000));\n        }\n    }\n    constructor(...args){\n        super(...args), // Types need to be listed as a const literal\n        this.types = [\n            'ex.transform',\n            'search'\n        ], // Lower numbers mean higher priority\n        // 99 is low priority\n        this.priority = 99, // Run this system in the \"update\" phase\n        this.systemType = $6TXE3.SystemType.Update, this._searchSpeed = 100 // pixels/sec\n        ;\n    }\n}\nconst $91149570b92921bc$var$scene = new $6TXE3.Scene();\n$91149570b92921bc$var$scene.world.add(new $91149570b92921bc$var$SearchSystem());\n// Actors come with batteries included built in features\nconst $91149570b92921bc$var$actor = new $6TXE3.Actor({\n    pos: $6TXE3.vec(100, 100),\n    width: 30,\n    height: 30,\n    color: $6TXE3.Color.Red\n});\n$91149570b92921bc$var$actor.addComponent(new $91149570b92921bc$var$SearchComponent($6TXE3.vec(600, 400)));\n// end-snippet{ecs}\n$91149570b92921bc$var$game.addScene('root', $91149570b92921bc$var$scene);\n$91149570b92921bc$var$game.start().then(()=>{\n    $91149570b92921bc$var$game.currentScene.add($91149570b92921bc$var$actor);\n});\n\n\n//# sourceMappingURL=ecs.b1a40835.js.map\n","import * as ex from 'excalibur';\nconst game = new ex.Engine({\n    width: 600,\n    height: 400\n});\n\n// start-snippet{ecs}\nclass SearchComponent extends ex.Component<'search'> {\n    public readonly type = 'search'\n    constructor(public target: ex.Vector) {\n        super();\n    }\n}\n\nclass SearchSystem extends ex.System<ex.TransformComponent | SearchComponent> {\n    // Types need to be listed as a const literal\n    public readonly types = ['ex.transform', 'search'] as const;\n\n    // Lower numbers mean higher priority\n    // 99 is low priority\n    public priority = 99;\n\n    // Run this system in the \"update\" phase\n    public systemType = ex.SystemType.Update\n\n    private _searchSpeed = 100 // pixels/sec\n\n    public update(entities: ex.Entity[], delta: number) {\n        for (let entity of entities) {\n            const target = entity.get(SearchComponent)!.target;\n            // ex.TransformComponent is a built in type\n            const transform = entity.get(ex.TransformComponent) as ex.TransformComponent;\n\n            const direction = target.sub(transform.pos);\n            const motion = direction.normalize().scale(this._searchSpeed);\n\n            // Moves these entities towards the target at 10 pixels per second\n            transform.pos = transform.pos.add(motion.scale(delta / 1000))\n        }\n    }\n}\n\nconst scene = new ex.Scene();\nscene.world.add(new SearchSystem());\n\n// Actors come with batteries included built in features\nconst actor = new ex.Actor({\n    pos: ex.vec(100, 100),\n    width: 30,\n    height: 30,\n    color: ex.Color.Red\n});\nactor.addComponent(new SearchComponent(ex.vec(600, 400)));\n// end-snippet{ecs}\n\ngame.addScene('root', scene);\ngame.start().then(() => {\n    game.currentScene.add(actor);\n});\n\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$6TXE3","$91149570b92921bc$var$game","Engine","width","height","$91149570b92921bc$var$SearchComponent","Component","target","type","$91149570b92921bc$var$SearchSystem","System","update","entities","delta","entity","get","transform","TransformComponent","motion","direction","sub","pos","normalize","scale","_searchSpeed","add","args","types","priority","systemType","SystemType","Update","$91149570b92921bc$var$scene","Scene","world","$91149570b92921bc$var$actor","Actor","vec","color","Color","Red","addComponent","addScene","start","then","currentScene"],"version":3,"file":"ecs.b1a40835.js.map"}